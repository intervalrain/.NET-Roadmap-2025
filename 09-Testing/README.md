# Chapter 9: Testing 總結

在本章中，我們系統地學習了軟體開發中至關重要的品質保證環節——測試。我們從最小的程式碼單元驗證，一直到多個元件的協同工作測試，建立了一套完整的測試知識體系。

## 1. 單元測試 (Unit Testing)
我們首先深入了單元測試的世界，它是保證程式碼品質的基石。
- **核心原則**：我們學習了好的單元測試應遵循的 "FIRST" 原則（快速、獨立、可重複、自我驗證、及時）。
- **3A 結構**：我們掌握了編寫清晰單元測試的 Arrange-Act-Assert (3A) 模式。
- **測試框架**：我們介紹了 .NET 中最流行的兩個測試框架：
    - **xUnit**：以其現代化的設計和鼓勵測試隔離的理念，成為社群的首選。
    - **MSTest**：微軟官方的傳統框架，與 Visual Studio 深度整合。
- **模擬 (Mocking)**：我們學習了單元測試中不可或缺的 Mocking 技術，用於將被測單元與其外部依賴（如資料庫、網路服務）隔離開來。我們比較了兩個主流的 Mocking 框架：
    - **NSubstitute**：以其簡潔、自然的語法而備受推崇。
    - **Moq**：功能強大，使用 Lambda 運算式進行設定。

## 2. 整合測試 (Integration Testing)
在單元測試的基礎上，我們進一步學習了如何驗證應用程式中多個元件之間的互動。
- **ASP.NET Core 整合測試**：我們學習了如何使用 `Microsoft.AspNetCore.Mvc.Testing` 套件中的 `WebApplicationFactory`，在記憶體中完整啟動我們的 Web 應用，並像真實客戶端一樣對其進行 HTTP 請求測試。這提供了一種快速、可靠的方式來測試 Controller、中介軟體和依賴注入的整合。
- **測試真實的外部依賴**：我們介紹了 `Testcontainers` 這個強大的函式庫。它讓我們能夠在測試執行期間，以程式化的方式啟動和銷毀 Docker 容器（如資料庫、訊息佇列）。這使得我們可以在一個隔離、一致的環境中，針對真實的外部基礎設施進行整合測試，極大地提高了測試的準確性和可靠性。

總結來說，本章為你提供了從微觀到宏觀的完整測試策略。你學會了如何使用單元測試來保證單一元件的正確性，並利用整合測試來確保系統的各個部分能夠無縫協作。掌握這些測試技能，你將能夠建構出更健壯、更可靠、更易於維護的高品質軟體。